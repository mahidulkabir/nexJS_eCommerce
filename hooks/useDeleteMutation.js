import { showToast } from "@/lib/showToast";
import { useMutation, useQueryClient } from "@tanstack/react-query";

const useDeleteMutation = (queryKey, deleteEndpoint)=>{
    const QueryClient = useQueryClient()

    return useMutation({
        mutationFn: async ({ids, deleteType}) => {
            const {data: response} = await axios({
                url:deleteEndpoint,
                method: deleteType === 'PD'?'DELETE':'PUT',
                data:{ids, deleteType}
            })
            if(!response.success){
                throw new Error (response.message)
            }
            return response
        }, 
        onSuccess:(data)=>{
            showToast('success', message)
            QueryClient.invalidateQueries([queryKey])
        },
        onError:(error)=>{
            showToast('error',error.message)
        }
    })
}
export default useDeleteMutation